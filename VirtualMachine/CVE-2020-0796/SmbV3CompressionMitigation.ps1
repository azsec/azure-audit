configuration SmbV3CompressionMitigation {
    Import-DscResource -ModuleName PSDesiredStateConfiguration   
    Node 'localhost' {
        Script 'SmbV3CompressionMitigation' {
            GetScript  = {

            }
            TestScript = {
                $releaseNumber =  (Get-ItemProperty -Path "HKLM:\SOFTWARE\Microsoft\Windows NT\CurrentVersion").ReleaseId
                $registry = Get-ItemProperty "HKLM:\SYSTEM\CurrentControlSet\Services\LanmanServer\Parameters"
                $result = $releaseNumber -in (1903, 1909) -and `
                          $registry.DisableCompression -eq "1" 

                return $result
            }
            SetScript  = {

            }
        }
    }
}